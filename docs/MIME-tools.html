    <HTML>

    <HEAD>
    <TITLE>MIME-tools</TITLE>
    </HEAD>

    <BODY>

    <A NAME="#__top"> <P></A>
<CENTER><TABLE BORDER=2 CELLPADDING=2 WIDTH=100%><TR><TD WIDTH=20% ROWSPAN=3 ALIGN=CENTER><B><FONT COLOR=#B00002>Home</FONT></B></TD><TD WIDTH=20%><B><FONT SIZE=-1><A HREF="Body.html">MIME::Body</A></FONT>
</B></TD><TD WIDTH=20%><B><FONT SIZE=-1><A HREF="Decoder.html">MIME::Decoder</A></FONT>
</B></TD><TD WIDTH=20%><B><FONT SIZE=-1><A HREF="Entity.html">MIME::Entity</A></FONT>
</B></TD><TD WIDTH=20%><B><FONT SIZE=-1><A HREF="Head.html">MIME::Head</A></FONT>
</B></TD><TR><TD WIDTH=20%><B><FONT SIZE=-1><A HREF="IO.html">MIME::IO</A></FONT>
</B></TD><TD WIDTH=20%><B><FONT SIZE=-1><A HREF="Latin1.html">MIME::Latin1</A></FONT>
</B></TD><TD WIDTH=20%><B><FONT SIZE=-1><A HREF="Parser.html">MIME::Parser</A></FONT>
</B></TD><TD WIDTH=20%><B><FONT SIZE=-1><A HREF="ParserBase.html">MIME::ParserBase</A></FONT>
</B></TD><TR><TD WIDTH=20%><B><FONT SIZE=-1><A HREF="ToolUtils.html">MIME::ToolUtils</A></FONT>
</B></TD></TABLE></CENTER>    <P><TABLE BORDER=0>
      <TR>
	<TD VALIGN=TOP ALIGN=CENTER>
	    <H1><B><FONT SIZE=7 COLOR=#300080>MIME-tools</FONT></B></H1>
	    <img src="mime-lg.gif" alt="MIME">
	    <P><FONT SIZE=+1 COLOR=#B00020><I>It's MIME time! *</I></FONT>
        <TD VALIGN=TOP>
<!-- INDEX BEGIN -->
<UL>
	<LI><A HREF="#name">NAME</A>
	<LI><A HREF="#description">DESCRIPTION</A>
	<LI><A HREF="#cpan_specifications">CPAN SPECIFICATIONS</A>
	<LI><A HREF="#kit_contents">KIT CONTENTS </A>
	<LI><A HREF="#requirements">REQUIREMENTS</A>
	<LI><A HREF="#installation">INSTALLATION</A>
	<LI><A HREF="#compatibility">COMPATIBILITY</A>
	<LI><A HREF="#design_issues">DESIGN ISSUES</A>
	<UL>
		<LI><A HREF="#why_assume_that_mime_objects_are">Why assume that MIME objects are email objects?</A>
		<LI><A HREF="#to_subclass_or_not_to_subclass">To subclass or not to subclass?</A>
		</UL>
	<LI><A HREF="#change_log">CHANGE LOG</A>
	<UL>
		<LI><A HREF="#ancient_history">Ancient history</A>
		<LI><A HREF="#future_plans">Future plans</A>
		</UL>
	<LI><A HREF="#terms_and_conditions">TERMS AND CONDITIONS</A>
	<LI><A HREF="#see_also">SEE ALSO</A>
	<LI><A HREF="#author">AUTHOR</A>
</UL>
<!-- INDEX END -->

    </TABLE>
<HR>
<P>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="name">NAME</A></H2>
MIME-tools - modules for parsing (and creating!) MIME entities


<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="description">DESCRIPTION</A></H2>
MIME-tools is a collection of Perl5 MIME:: modules for parsing and decoding
single- or multipart (even nested multipart) MIME messages.


<P>

You usually start by creating an instance of <STRONG><A HREF="Parser.html">MIME::Parser</A></STRONG>
 (a subclass of the abstract <STRONG><A HREF="ParserBase.html">MIME::ParserBase</A></STRONG>
), and setting up certain parsing parameters: what directory to save
extracted files to, how to name the files, etc.


<P>

You then give that instance a readable filehandle on which waits a MIME
message. If all goes well, you will get back a <STRONG><A HREF="Entity.html">MIME::Entity</A></STRONG>

object (a subclass of <STRONG>Mail::Internet</STRONG>
), which consists of...


<P>

<UL>
<LI><STRONG></STRONG>
A <STRONG><A HREF="Head.html">MIME::Head</A></STRONG>
 (a subclass of <STRONG>Mail::Header</STRONG>
) which holds the MIME header data.


<P>

<LI><STRONG></STRONG>
A <STRONG><A HREF="Body.html">MIME::Body</A></STRONG>
, which is a object that knows where the body data is. You ask this object
to ``open'' itself for reading, and it will hand you back an ``I/O handle''
for reading the data: this is a FileHandle-like object, and could be of any
class, so long as it conforms to a subset of the <STRONG>IO::Handle</STRONG>
 interface. Most of the MIME:: modules will automatically wrap raw
(unblessed) filehandles inside <STRONG><A HREF="IO.html">MIME::IO</A></STRONG>
 objects, so that they conform to this interface.


<P>

</UL>
If the original message was a multipart document, the <A
HREF="Entity.html">MIME::Entity</A> object will have a non-empty list of
``parts'', each of which is in turn a <A
HREF="Entity.html">MIME::Entity</A> (which might also be a multipart
entity, etc, etc...).


<P>

Internally, the parser (in <A HREF="ParserBase.html">MIME::ParserBase)</A>
asks for instances of <STRONG><A HREF="Decoder.html">MIME::Decoder</A></STRONG>
 whenever it needs to decode an encoded file. <A
HREF="Decoder.html">MIME::Decoder</A> has a mapping from supported
encodings (e.g., 'base64') to classes whose instances can decode them. You
can add to this mapping to try out new/experiment encodings. You can also
use <A HREF="Decoder.html">MIME::Decoder</A> by itself.  


<P>

The <A HREF="Decoder.html">MIME::Decoder</A> can be used to <EM>encode</EM>
 as well. When encoding an 8-bit document as a 7-bit mail message, the 8-bit
characters are escaped for you, by the <STRONG><A HREF="Latin1.html">MIME::Latin1</A></STRONG>
 module.


<P>

If you want to tweak the way this toolkit works (for example, to turn on
debugging), use the routines in the <STRONG><A HREF="ToolUtils.html">MIME::ToolUtils</A></STRONG>
 module.


<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="cpan_specifications">CPAN SPECIFICATIONS</A></H2>
<PRE>
    Module       DSLI   Description                                 Info
    ----------   ----   ----------------------------------------    ----
    MIME::
    ::Decoder    adpO   OO interface for decoding MIME messages     ERYQ
    ::Entity     adpO   An extracted and decoded MIME entity        ERYQ
    ::Head       adpO   A parsed MIME header                        ERYQ
    ::IO         adpO   Simple I/O handles for filehandles/scalars  ERYQ
    ::Latin1     adpO   Encoding 8-bit Latin-1 as 7-bit ASCII       ERYQ
    ::Parser     adpO   Parses streams to create MIME entities      ERYQ
    ::ParserBase adpO   For building your own MIME parser           ERYQ
</PRE>

<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="kit_contents">KIT CONTENTS </A></H2>
<PRE>
    ./MIME/*.pm         the MIME-tools classes
    ./Makefile.PL       the input to MakeMaker
    ./COPYING           terms and conditions for copying/using the software
    ./README            this file
    ./docs/             HTMLized documentation
    ./etc/              convenient copies of other modules you may need
    ./testin/           files you can use for testing (as in &quot;make test&quot;)
    ./testout/          the output of &quot;make test&quot;
</PRE>

<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="requirements">REQUIREMENTS</A></H2>
You'll need Perl5.001m or better... aw, heck: let's call it 5.002.


<P>

Obtain and install the following kits from the CPAN:


<P>

<PRE>
    MIME::QuotedPrint 
    
    MIME::Base64
    
    MailTools:             (1.06 or higher)  
        Mail::Header
        Mail::Internet
        etc...
</PRE>

<P>

For your convenience, possibly-old copies are provided in the ./etc
directory, of the distribution, but they are NOT installed for you during
the installation procedure.


<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="installation">INSTALLATION</A></H2>
Pretty simple:


<P>

<PRE>
    1. Gunzip and de-tar the distribution, and cd to the top level.
    2. Type:      perl Makefile.PL
    3. Type:      make                    # this step is optional
    4. Type:      make test               # this step is optional
    5. Type:      make install
</PRE>

<P>

Other interesting targets in the Makefile are:


<P>

<PRE>
    make config     # to check if the Makefile is up-to-date
    make clean      # delete local temp files (Makefile gets renamed)
    make realclean  # delete derived files (including ./blib)
</PRE>

<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="compatibility">COMPATIBILITY</A></H2>
If you're installing this as a replacement for the MIME-parser 1.x release,
and you really don't want to break existing code, you should do this at any
point before the code is invoked:


<P>

<PRE>
    use MIME::ParserUtil;
    
    MIME::ParserUtil-&gt;emulate_version(1.0);
</PRE>

<P>

Try not to get too attached to this, though. Instead, plan on upgrading
your code ASAP to the 2.0 style.


<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="design_issues">DESIGN ISSUES</A></H2>
<P>
<HR ALIGN=LEFT WIDTH=75%>
<H3><A NAME="why_assume_that_mime_objects_are">Why assume that MIME objects are email objects?</A></H3>
I quote from Achim Bohnet, who gave feedback on v.1.9 (I think he's using
the word <EM>header</EM>
 where I would use <EM>field</EM>
; e.g., to refer to ``Subject:'', ``Content-type:'', etc.):


<P>

<PRE>
    There is also IMHO no requirement [for] MIME::Heads to look 
    like [email] headers; so to speak, the MIME::Head [simply stores] 
    the attributes of a complex object, e.g.:
</PRE>

<P>

<PRE>
        new MIME::Head type =&gt; &quot;text/plain&quot;,
                       charset =&gt; ...,
                       disposition =&gt; ..., ... ;
</PRE>

<P>

I agree in principle, but (alas and dammit) RFC-1521 says otherwise.
RFC-1521 [MIME] headers are a syntactic subset of RFC-822 [email] headers.
Perhaps a better name for these modules would be RFC1521:: instead of
MIME::, but we're a little beyond that stage now.


<P>

In my mind's eye, I see an abstract class, call it <A
HREF="Attrs.html">MIME::Attrs,</A> which does what Achim suggests... so you
could say:


<P>

<PRE>
     my $attrs = new MIME::Attrs type =&gt; &quot;text/plain&quot;,
				 charset =&gt; ...,
                                 disposition =&gt; ..., ... ;
</PRE>

<P>

We could even make it a superclass of <A HREF="Head.html">MIME::Head:</A>
that way, <A HREF="Head.html">MIME::Head</A> would have to implement its
interface, <EM>and</EM>
 allow itself to be initiallized from a <A HREF="Attrs.html">MIME::Attrs</A>
object.


<P>

However, when you read RFC-1521, you begin to see how much MIME information
is organized by its presence in particular fields. I imagine that we'd
begin to mirror the structure of RFC-1521 fields and subfields to such a
degree that this might not give us a tremendous gain over just having <A
HREF="Head.html">MIME::Head.</A>


<P>

<P>
<HR ALIGN=LEFT WIDTH=75%>
<H3><A NAME="to_subclass_or_not_to_subclass">To subclass or not to subclass?</A></H3>
When I originally wrote this module for the CPAN, I agonized for a long
time about whether or not it really should just be a subclass of <STRONG>Mail::Internet</STRONG>
 (then at version 1.17). There were plusses:


<P>

<UL>
<LI><STRONG></STRONG>
Software reuse.


<P>

<LI><STRONG></STRONG>
Inheritance of the mail-sending utilities.


<P>

</UL>
And, unfortunately, minuses:


<P>

<UL>
<LI><STRONG></STRONG>
The Mail::Internet 1.17 model of messages as being short enough to fit into
in-core arrays is excellent for most email applications; however, it seemed
ill-suited for generic MIME applications, where MIME streams could be
megabytes long.


<P>

<LI><STRONG></STRONG>
The implementation of Mail::Internet 1.17 was excellent for certain kinds
of header manipulation, but the implementation of <CODE>get()</CODE> was less-efficient than I would have liked for MIME applications.


<P>

<LI><STRONG></STRONG>
In my heart of hearts, I honestly felt that the head should be encapsulated
as a first-class object, and in Mail::Internet 1.17 it was not.


<P>

</UL>
So I chose to make <A HREF="Head.html">MIME::Head</A> and <A
HREF="Entity.html">MIME::Entity</A> their own standalone modules.


<P>

Since that time, I worked with Graham Barr (author of most of the MailTools
package, and a darn nice guy to ``work'' with over email), and he has
graciously evolved the MailTools modules into a direction that addressed a
lot of these issues.


<P>

With MailTools now its 1.06 release, it was finally time to finish what I
started, and release MIME-tools 2.0.


<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="change_log">CHANGE LOG</A></H2>
<P>
<HR ALIGN=LEFT WIDTH=75%>
<H3><A NAME="ancient_history">Ancient history</A></H3>
<DL>
<DT><STRONG><A NAME="item_version_20">Version 2.0

</A></STRONG><DD>
Modules now inherit from the new Mail:: modules! This means big changes in
behavior.


<P>

<DT><STRONG><A NAME="item_version_113">Version 1.13 	

</A></STRONG><DD>
<A HREF="Head.html">MIME::Head</A> now no longer requires space after
``:'', although either a space or a tab after the ``:'' will be swallowed
if there. Thanks to Igor Starovoitov for pointing out this shortcoming.


<P>

<DT><STRONG><A NAME="item_version_112">Version 1.12	

</A></STRONG><DD>
Fixed bugs in parser where CRLF-terminated lines were blowing out the
handling of preambles/epilogues. Thanks to Russell Sutherland for reporting
this bug.


<P>

Fixed idiotic <CODE>is_multipart()</CODE> bug. Thanks to Andreas Koenig for
noticing it.


<P>

Added untested <CODE>binmode()</CODE> calls to parser for DOS, etc.
systems. No idea if this will work...


<P>

Reorganized the <CODE>output_path()</CODE> methods to allow easy use of
inheritance, as per Achim Bohnet's suggestion.


<P>

Changed <A HREF="Head.html">MIME::Head</A> to report mime_type more
accurately.


<P>

POSIX module no longer loaded by Parser if perl >= 5.002. Hey, 5.001'ers:
let me know if this breaks stuff, okay?


<P>

Added unsupported ./examples directory.


<P>

<DT><STRONG><A NAME="item_version_111">Version 1.11	

</A></STRONG><DD>
Converted over to using Makefile.PL. Thanks to Andreas Koenig for the
much-needed kick in the pants...


<P>

Added t/*.t files for testing. Eeeeeeeeeeeh...it's a start.


<P>

Fixed bug in default parsing routine for generating output paths; it was
warning about evil filenames if there simply *were* no recommended
filenames. D'oh!


<P>

Fixed redefined <CODE>parts()</CODE> method in Entity.


<P>

Fixed bugs in Head where field name wasn't being case folded.


<P>

<DT><STRONG><A NAME="item_version_110">Version 1.10	

</A></STRONG><DD>
A typo was causing the epilogue of an inner multipart message to be
swallowed to the end of the OUTER multipart message; this has now been
fixed. Thanks to Igor Starovoitov for reporting this bug.


<P>

A bad regexp for parameter names was causing some parameters to be parsed
incorrectly; this has also been fixed. Thanks again to Igor Starovoitov for
reporting this bug. It is now possible to get full control of the
filenaming algorithm before output files are generated, and the default
algorithm is safer. Thanks to Laurent Amon for pointing out the problems,
and suggesting some solutions. 


<P>

Fixed illegal ``simple'' multipart test file. D'OH!


<P>

<DT><STRONG><A NAME="item_version_19">Version 1.9	

</A></STRONG><DD>
No changes: 1.8 failed CPAN registration


<P>

<DT><STRONG><A NAME="item_version_18">Version 1.8.	

</A></STRONG><DD>
Fixed incompatibility with 5.001 and FileHandle::new_tmpfile Added COPYING
file, and improved README.


<P>

</DL>
<P>
<HR ALIGN=LEFT WIDTH=75%>
<H3><A NAME="future_plans">Future plans</A></H3>
<UL>
<LI><STRONG></STRONG>
Add option to parse message/rfc822 as a pseduo multipart document.


<P>

<LI><STRONG></STRONG>
Dress up mimedump and mimeexplode utilities to take cmd line options for
directory, environment vars (MIMEDUMP_OUTPUT, etc.).


<P>

<LI><STRONG></STRONG>
Allow you to specify a <CODE>cutoff()</CODE> method that will determine
whether decoded message is stored on disk or in a scalar. Default will
probably keep messages <10-20K in core. In such a case, the
<CODE>body()</CODE> method will return undef; we'll need a new way of
accessing the data transparently. Too bad <CODE>setvbuf()</CODE> isn't
guaranteed... we could just ``open'' a filehandle on the scalar... hmmm...
maybe I'll provide an <CODE>open_body()</CODE> for those lucky few that
have it... :-)


<P>

</UL>
<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="terms_and_conditions">TERMS AND CONDITIONS</A></H2>
Copyright (c) 1996 by Eryq. All rights reserved. This program is free
software; you can redistribute it and/or modify it under the same terms as
Perl itself. 


<P>

See the COPYING file in the distribution for details.


<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="see_also">SEE ALSO</A></H2>
The MIME format is documented in RFC 1521.  


<P>

The MIME header format is documented in RFC 822.


<P>

<P>
<HR ALIGN=LEFT WIDTH=100%>
<H2><A HREF="#__top"><IMG SRC="redbul.gif" ALT="*" BORDER=0></A> <A NAME="author">AUTHOR</A></H2>
Eryq, <A
HREF="MAILTO:eryq@rhine.gsfc.nasa.gov.">eryq@rhine.gsfc.nasa.gov.</A>  


<P>

Initial release (1.0): 28 April 1996. Re-release (2.0): Halloween 1996.


<P>

    <P>
    <HR>       
    <FONT COLOR=#F00000>*</FONT>
    <FONT SIZE=-1>
    Artwork and slogan from Warner Bros' "Animaniacs". 
    Neither this code nor its author are connected with or
    endorsed by Warner Bros. in any way. Narf. Poit. 
    </FONT>
    </BODY>

    </HTML>
